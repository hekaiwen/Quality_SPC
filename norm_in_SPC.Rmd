---
title: "norm_in_SPC"
output: html_document
date: "2022-10-01"
---

```{r setup, include=FALSE}
knitr::opts_chunk$set(echo = TRUE)
library(tidyverse)
library(kableExtra)
```

# 正态分布

## 正态分布是什么分布？

它是数据统计的一种分布趋势的规律，这个规律是这样的。

```{r}
set.seed(2020)
m <- 10000000

#df1$sn <- row.names(df1)
#kable(df1)

i <- 5

  n <- m/(10^i)
  print(n)
  data1 <- round(rnorm(n,8,0.02),3)
  df1 <- data.frame(x = data1,d= dnorm(data1))
  p <- ggplot(df1,aes(x=x,y=d)) + geom_histogram(aes(y=..density..),binwidth = 0.004) +geom_line()
  p
  


  i <- 4

  n <- m/(10^i)
  print(n)
  data1 <- round(rnorm(n,8,0.02),3)
  df1 <- data.frame(x = data1,d= dnorm(data1))
  p <- ggplot(df1,aes(x=x,y=d)) + geom_histogram(aes(y=..density..),binwidth = 0.004) +geom_line()
  p
  

  i <- 3

  n <- m/(10^i)
  print(n)
  data1 <- round(rnorm(n,8,0.02),3)
  df1 <- data.frame(x = data1,d= dnorm(data1))
  p <- ggplot(df1,aes(x=x,y=d)) + geom_histogram(aes(y=..density..),binwidth = 0.002) +geom_line()
  p
  

  i <- 2

  n <- m/(10^i)
  print(n)
  data1 <- round(rnorm(n,8,0.02),3)
  df1 <- data.frame(x = data1,d= dnorm(data1))
  p <- ggplot(df1,aes(x=x,y=d)) + geom_histogram(aes(y=..density..),binwidth = 0.002) +geom_line()
  p
  

#df2 <- distinct(df1) %>% arrange(x)


 #geom_line(aes(y=d))



```


## 均值

某工件的一个设计尺寸是 8±0.02mm，也就是说测量值在7.98~8.02范围是合格的，超出范围是不合格。

如下数据是一个工件加工后的尺寸，

```{r echo=FALSE}

norm.data <- data.frame(x = head(data1,20),group ="第1组") 
kable(top_n(norm.data,20),format = "html",caption = "某工件的尺寸测量值x1")

summary(norm.data$x)

```

这组测量值的均值


```{r echo=FALSE}
#norm.data <- data.frame(x1=x1,d1 = dnorm(data1,8,3),sd_group="sd1",group ="第1组") 
norm.data <- norm.data %>% mutate(x_mean = mean(x))  %>% select(x,x_mean,group)
                                  
kable(norm.data,format = "html",caption = "某工件的尺寸测量值x")

```

## 偏差

```{r echo=FALSE}
#norm.data <- data.frame(x1=x1,d1 = dnorm(data1,8,3),sd_group="sd1",group ="第1组") 
norm.data <- norm.data %>% mutate(S = x-x_mean)  %>% select(x,x_mean,S,group)



kable(norm.data,format = "html",caption = "某工件的尺寸测量值x")

```

## 方差与标准差

```{r echo=FALSE}
#norm.data <- data.frame(x1=x1,d1 = dnorm(data1,8,3),sd_group="sd1",group ="第1组") 
norm.data <- norm.data %>% mutate(Sx2 = S*S,5) %>% select(x,x_mean,S,Sx2,group)

kable(norm.data,format = "html",caption = "某工件的尺寸测量值x")
segmax2 <-sum(norm.data$Sx2)/(nrow(norm.data)-1)
segmax2 

var <- var(norm.data$x)
var

segma <- sqrt(segmax2)
segma

sd <- sd(norm.data$x)
sd


```

这组数据的方差是 `r segmax2`，标准差是`r segma `。





## 西格玛


## 


## R Markdown


